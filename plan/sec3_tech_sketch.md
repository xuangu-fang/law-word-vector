## 三、数据与方法（写作提纲草案）

说明：本节写作对象为法学社区读者，重在把“动态词向量”方法转换为可理解、可检验、可复现的研究程序。行文避免技术堆砌，用“为何这样做—如何这样做—据此如何解释”的结构串联，并与前两节的理论和历史梳理自然衔接。

### 1. 动态词向量方法介绍（why 与 what）

- 核心思想（读者友好表述）
  - 以“语义邻近结构”刻画概念在不同时期与哪些词“走得近”，并观察这种邻近结构的迁移与重排。
  - 技术上，使用词向量模型将词语表示为向量，向量之间的夹角（余弦相似度）度量语义相近程度；“动态”指在不同时间切片分别训练/微调模型，比较各切片结果。

- 时间分辨率与两条技术路径（与研究问题的对应关系）
  - 三阶段固定时期（Era1: 1978–1996；Era2: 1997–2013；Era3: 2014–2024）：用于呈现关键政治阶段的语义结构差异（对应宏观分期叙事）。
  - 滑动窗口（10年窗、5年步长）：用于捕捉渐进变化与“过渡期”特征（对应“语义渐进—拐点识别”）。

- 技术选择与可解释性取向（避免AI黑箱）
  - 采用可解释的 Word2Vec（Skip-gram），而非深层黑箱模型；度量使用余弦相似度，便于法学读者理解为“靠近/远离”的强度。
  - 未使用后验旋转对齐（如 Procrustes）以免引入额外假设；通过统一的预训练向量空间与一致超参数，保证跨期比较的可比性；固定时期路径采用“增量微调”进一步维持跨期连贯性，滑动窗口路径采用“同基向量+相同流程”的平行对比作稳健性检验。

- 焦点词与语义邻域的“聚焦微调”（面向研究问题的定制）
  - 围绕“法治”构造其高频共现邻域（每期 Top-N 共现词），在模型构建时优先保证邻域词汇的表示质量，使所得“语义邻近结构”与研究对象强相关（避免被海量无关词稀释）。

（代码锚点）
- 三时期：`src/models_ft/finetune_word_vectors_flexible.py`
  - Skip-gram；增量微调=是；epochs=10；窗口=50；min_count=5；聚焦微调=是（TopN=10000）。
- 滑窗：`src/models_ft/finetune_word_vectors_sliding_window.py`
  - Skip-gram；增量微调=否；epochs=15；窗口=10；min_count=5；聚焦微调=是（TopN=5000）。

可视化与直观读法
- 相似度趋势（法制 vs 法治）：`output/rule_by-of_law_sim/*.png`
- 多维主题热力图/雷达图/趋势图：`output/topic_analysis/**/`

### 2. 数据来源与取样边界：为何选择《人民日报》

- 选择理由（与研究问题的契合）
  - 《人民日报》直接承载中央政治语言，反映特定时期的治理重心与政策表达；适合作为“官方法治话语”的代理观测。
  - 时间跨度大（1978–2024），利于构建连续的语义演化轨迹；文本体量大（预计约131万篇、13.5亿字），支撑稳健的统计学习。

- 数据获取与版权合规说明（简述）
  - 使用已整理的分年 Excel（含“标题”“文本内容”）；仅用于学术研究与方法验证。

- 取样与可能偏差（限度与风险）
  - 媒体类型单一导致的“话语风格偏移”；同一媒体内部的栏目的体裁差异；这些在第5节“稳健性与限制”中进一步讨论，并通过滑动窗与多指标交叉验证降低风险。

（代码锚点）
- 年度数据路径：`~/data/rmrb-year/分年份保存数据/人民日报{year}年文本数据.xlsx`
- 年度预处理脚本：`src/corpus_process/by_year_preprocess.py`

### 3. 语料预处理与模型训练流程（how）

- 预处理流水线（逐步可复现）
  1) 清洗：去除非中英文数字符号、规范空白。
  2) 分词：`jieba`，补充法律—政治高频词表（如“依法治国”“司法公正”“法治政府”等，脚本内置）。
  3) 去停用：常见虚词停用表；允许某些单字专有词保留（如自定义词典命中）。
  4) 输出：逐文档分词行，保存至 `processed_data/yearly_corpus/{year}.txt`；生成年度统计（文档数、总词数、词表规模）与折线图至 `processed_data/stats/`。

- 分期语料构建
  - 将年度语料按配置拼接为时期语料，落盘至 `processed_data/period_corpus/{period}.txt`。
  - 脚本：`src/corpus_process/corpus_manager.py`。

- 词向量训练与“聚焦微调”
  - 预训练基座：`~/gensim-data/vectors/chinese_vectors.kv`。
  - 计算“法治”在期内的 Top-N 共现词（窗口等于训练窗口），形成“聚焦词表”，并在 `build_vocab` 阶段用自定义 `trim_rule` 保留“聚焦∩高频”词，提高焦点邻域的表示质量；保留 `min_count=5` 的稳健性门槛。
  - 关键超参数：
    - 固定时期：window=50, epochs=10, sg=1, incremental=True, TopN=10000。
    - 滑动窗口：window=10, epochs=15, sg=1, incremental=False, TopN=5000。
  - 跨期可比性：
    - 固定时期采用“增量微调”在同一嵌入空间递进更新；滑动窗路径以同一预训练基座独立微调，作为稳健性对照。

- 质量检查与热加载
  - 训练后用固定关键词集做 sanity check（如与“宪法”“改革”“民主”等的前5相似词）。
  - 工具函数：`src/utils.py`（模型批量加载、相似词导出、可视化）。

### 4. 建模与定义（指标体系与主题维度）

- A) 概念对（rule by law vs rule of law）相似度与指数
  - 词频：年度“法制/法治”每百万词频率趋势，用以描述术语替换与扩散（脚本：`rule_by_of_law_freq_analyzer.py`；输出：`output/rule_by-of_law_freq/`）。
  - 直接相似度：各期模型中“法制”与“法治”的余弦相似度趋势（脚本：`rule_by_of_law_similarity_analyzer.py`；输出：`output/rule_by-of_law_sim/`）。
  - 语义动态指数（gap）：面向“约束—发展”二元的类目词包，计算“法治/法制”与两类词包的平均相似度之差：gap = 发展类 − 约束类。用于衡量“工具性/发展性”语义相对于“约束/限制”语义的相对强弱（脚本：`rule_by_of_law_index_analyzer.py`；输出：`output/rule_by-of_law_index/`）。
  - 词包来源：专家标注 Excel（多 Sheet：法治/法制 × era1/2/3），脚本会导出结构化 JSON 并在两种 setting 下计算：
    - exactly：法治/法制分别使用各自的词包（对应历史真实使用差异）。
    - combined：在滑动窗过渡期，按时代组合相关词包以减少边界效应。

- B) 主题维度分析（三组共通框架，统一算法）
  - 内在规范价值（示例四维）：实质正义、正当程序、权力制衡、权利保障。
  - 法治实践环节（四维）：立法、司法、执法、守法。
  - 治理—发展领域（四维）：经济/金融、对外开放、生态环境、科技发展（与“工具价值”脉络呼应）。
  - 统一实现：`src/topic_word_analysis/*.py`，采用“General Union”策略确保跨期词包一致、可比；支持 era-keyword 设定与归一化：
    - 关键设定（与正文一致）：era1=法制；era2=[法制+法治]（平均）；era3=法治。
    - 可视化：热力图（era×topic）、雷达图（多维对比）、趋势图（跨期变化）。
  - 输出路径参考：
    - 内在价值：`output/topic_analysis/inner_value/...`
    - 实践环节：`output/topic_analysis/legal_process/...`
    - 领域/外在：`output/topic_analysis/domain/...`
    - 合并八维：`output/topic_analysis/combine_domain/...`

- C) 解释学规则与阅读指引
  - 相似度是“关系强弱”的统计度量，不等于因果或规范评价；需与第二节的历史与概念脉络交叉解读。
  - “由近及远”的读法：先看“法制—法治”替换与相似度，再看 gap 指数方向，最后进入三组维度热力图的结构性差异。

### 5. 稳健性与局限（与第4节结果联动展示）

- 稳健性策略
  - 双路径训练：固定时期（增量） vs 滑动窗（独立），结论对比一致性。
  - 词包 setting：exactly vs combined；并报告各类词包在期内有效词覆盖率（OOV 率）与样本量。
  - 归一化对照：同一 era 内归一化 vs 跨 era 原值；图中标注归一化方式。

- 可能局限
  - 单一媒体来源的体裁与编辑风格影响；政治口径变化导致的“同词异义”；
  - 词向量方法对低频词敏感，已通过 `min_count=5` 与聚焦微调缓解，但仍需谨慎解读。

### 6. 复现与运行环境（简明清单）

- 环境与依赖
  - conda 环境：`law_word_vector`（请确保激活）。
  - 预训练向量：`~/gensim-data/vectors/chinese_vectors.kv`。

- 最小复现顺序（命令级别在附录补充）
  1) 生成年度语料：运行 `src/corpus_process/by_year_preprocess.py`（产物：`processed_data/yearly_corpus/`）。
  2) 生成时期语料：`src/corpus_process/corpus_manager.py`。
  3) 训练（两条路径，可并行）：
     - 固定时期：`src/models_ft/finetune_word_vectors_flexible.py`。
     - 滑动窗：`src/models_ft/finetune_word_vectors_sliding_window.py`。
  4) 指标与主题分析：
     - 频率/相似度/指数：`src/rule_by-of_law_analysis/*.py`。
     - 主题维度：`src/topic_word_analysis/*.py`。

### 7. 与正文衔接与图表落位建议（供写作时引用）

- “法制—法治”词频与相似度趋势：图3-1 与 图3-2（对应该目录输出）。
- 语义动态指数（gap）：图3-3（柱状/折线，固定时期与滑动窗并列）。
- 三组维度热力图：图3-4a（内在规范）、图3-4b（实践环节）、图3-4c（领域/外在）；
  - 每图在注释中注明 era-keyword 设定与归一化方式，保持与 README 说明一致：
    “注意：四、五、六、七部分结果基于 ‘法制-era1，法制+法治-era2，法治-era3’ 的设定计算”。

—— 以上为第3节“数据与方法”的详细写作提纲。待你确认口径后，我将据此撰写正式文本，并在必要处补充脚注（如方法学参考、术语定义）与图表说明。


